{"version":3,"file":"997.js","sources":["../scatterplot.js","../997.js"],"sourcesContent":["import { \n\t// select, \n\tscaleTime, \n\tscaleLinear, \n\textent,\n\taxisLeft,\n\taxisBottom,\n\tformat,\n\t// nest,\n\t// line,\n\t// curveBasis,\n\t// mouse\n} from 'd3';\n\nexport const scatterplot = (selection, props) => {\n\tconst {\n\t\tdata,\n\t\txDomain,\n\t\tyDomain,\n\t\tcolorScale,\n\t\t// colorValue,\n\t\topacityFilter,\n\t\tinnerWidth,\n\t\tinnerHeight,\n\t\tcircleRadius\n\t} = props;\n\t\n\n\tconst xAxisLabel = 'year'; \n\tconst yAxisLabel = 'price';\n\t\n\tconst gUpdate = selection.selectAll('g').data([null]);\n\tconst gEnter = gUpdate.enter().append('g');\n\tconst g = gUpdate.merge(gEnter);\n\n\n\tconst xScale = scaleTime()\n\t\t.domain(xDomain)\n\t\t.range([0, innerWidth])\n\t\t.nice(); \n\t\t\n\tconst yScale = scaleLinear()\n\t\t.domain(yDomain)\n\t\t.range([innerHeight, 0])\n\t\t.nice();\n\n\tconst xAxisTickFormat = number =>\n\t\tformat('t')(number)\n\t\t\t// .replace('.0', '');\n\n\tconst xAxis = axisBottom(xScale)\n\t\t// .ticks(26)\n\t\t// .tickSize(-innerHeight)\n\t\t// .tickPadding(15);\n\t\t.tickFormat(xAxisTickFormat)\n\t\n\tconst xAxisG = gEnter\n\t\t.append('g').call(xAxis)\n\t\t\t.attr('transform', `translate(0,${innerHeight})`)\n\t\t\t.attr('class', 'x-axis')\n\t\n\txAxisG.select('.domain').remove();\n\t\n\txAxisG.append('text')\n\t\t.attr('class', 'axis-label')\n\t\t.attr('x', innerWidth / 2)\n\t\t.attr('y', 25)\n\t\t.attr('fill', 'black')\n\t\t.text(xAxisLabel);\n\n\tconst yAxisTickFormat = number =>\n\t\tformat('.2s')(number)\n\t\t\t.replace('.0', '');\n\t\n\tconst yAxis = axisLeft(yScale)\n\t\t// .tickSize(-innerWidth)\n\t\t// .tickPadding(5)\n\t\t// .tickFormat(yAxisTickFormat);\n\t\n\tconst yAxisG = gEnter\n\t\t.append('g').call(yAxis)\n\t\t.attr('class', 'y-axis');\n\t\n\tyAxisG.selectAll('.domain').remove();\n\t\n\tyAxisG.append('text')\n\t\t.attr('class', 'axis-label')\n\t\t.attr('y', -50)\n\t\t.attr('x', -innerHeight / 2)\n\t\t.attr('fill', 'black')\n\t\t.attr('transform', `rotate(-90)`)\n\t\t.attr('text-anchor', 'middle')\n\t\t.text(yAxisLabel);\n\n\tconsole.log(selection.select('.y-axis').style('width'))\n\n\tvar dots = selection.selectAll('.datapoint')\n\t\t.data(data)\n\n\tvar dotsEnter = dots.enter().append('circle')\n\t\t.attr('make', d => d.make)\n\t\t.attr('model', d => d.model)\n\t\t.attr('url', d => d.url)\n\t\t// .transition(100)\n\t\t// \t.attr('opacity', 1)\n\n\n\t\n\tdotsEnter.merge(dots)\n\t\t.attr(\"cx\", function (d) { return xScale(d.year); } )\n\t\t.attr(\"cy\", function (d) { return yScale(d.price); } )\n\t\t.attr(\"r\", circleRadius)\n\t\t.attr('class', 'datapoint')\n\t\t.style(\"fill\", d => colorScale(d.model)) \n\t\t.transition(500)\n\t\t\t.attr('opacity', d => opacityFilter.includes(d.model) ? 1 : 0.1)\n\n\n\tdots.exit()\n\t\t.transition(100)\n\t\t.attr('opacity', 0)\n\t\t.remove()\n\n};\n","import {\n  select,\n  extent,\n  scaleOrdinal,\n  schemeCategory10\n} from 'd3';\nimport { scatterplot } from './scatterplot';\n\nlet LinkFormatter = (value, row, index) => {\n  // console.log(value)\n  return \"<a href='\"+row.url+\"'>\"+row.info+\"</a>\";\n}\nconst colorScale = scaleOrdinal();\n\nvar opacityFilter\n\nvar fullData, chartData;\n\nconst width = window.innerWidth;\nconst height = window.innerHeight/2\n\nconst xAxisHeight = 30\nconst yAxisWidth = 60\nconst svg = select('#dashboard').append('svg')\n  .attr('width', width)\n  .attr('height', height)\n\n\n// const width = +svg.attr('width');\n// const height = +svg.attr('height');\nconst margin = { top: 30, right: 30, bottom: xAxisHeight, left: yAxisWidth };\nconst innerWidth = width - margin.left - margin.right;\nconst innerHeight = height - margin.top - margin.bottom;\nconst title = 'Porsches';\n\nconst scatterG = svg.append('g')\n  // .attr('class', 'scatterplot')\n  .attr('transform', `translate(${margin.left},${margin.top})`);\n\nconst legendG = svg.append('g')\n  .attr('class', 'legend-ordinal')\n  .attr('transform', `translate(${20 + yAxisWidth}, 20)`);\n\nvar legendOrdinal = d3.legendColor()\n  .shape(\"path\", d3.symbol().type(d3.symbolTriangle).size(150)())\n  .shapePadding(10)\n  .scale(colorScale)\n  .on('cellclick', cell => {\n    opacityFilter.includes(cell) ? \n      opacityFilter = opacityFilter.filter(c => c != cell) : opacityFilter.push(cell)\n    render();\n  })\n\nsvg.append('text')\n  .attr('class', 'title')\n  .attr('x', (width + margin.left) / 2)\n  .attr('y', 45)\n  .text(title);\n\nd3.json('/cars/porsche/data/download').then(porscheData => {\n  console.log(porscheData)\n  fullData = porscheData.sort()\n  chartData = fullData\n  var models = [...new Set(fullData.map(item => item.model))]\n  opacityFilter = models;\n\n  const $table = $('#table')\n  $(function() {\n    $table.bootstrapTable( { \n      'data': fullData, \n      'onSearch': function()  {\n        var tableData = $table.bootstrapTable('getData')\n        chartData = fullData.filter(d => tableData.includes(d))\n        render()\n      },\n    }) \n  })\n  render();\n  colorScale \n    .domain(models)\n    .range(schemeCategory10)\n});\n\nconst render = () => {\n  legendG.call(legendOrdinal);\n  \n  scatterG.call(scatterplot, {\n    data: chartData,\n    xDomain: extent(fullData, d => d.year),\n    yDomain: [0, 150000],//extent(fullData, d => d.price),\n    colorScale,\n    // colorValue,\n    opacityFilter,\n    innerWidth,\n    innerHeight,\n    circleRadius: 3\n  });\n  \n};\n"],"names":["scaleTime","scaleLinear","format","axisBottom","axisLeft","scaleOrdinal","select","schemeCategory10","extent"],"mappings":"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"}